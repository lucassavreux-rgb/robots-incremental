<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç™ Cookie Clicker Pro</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .title {
            font-size: 3em;
            font-weight: 900;
            margin-bottom: 10px;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .score-display {
            font-size: 2.5em;
            font-weight: 700;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .per-second {
            font-size: 1.2em;
            color: #4ade80;
            margin-top: 10px;
        }

        .per-click-display {
            font-size: 1em;
            color: #fbbf24;
            margin-top: 5px;
        }

        .main-container {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            gap: 20px;
            padding: 30px 20px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            max-height: calc(100vh - 250px);
            overflow-y: auto;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clicker-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .click-button {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, #ffd700, #ff8c00);
            border: 8px solid #fff;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            font-size: 8em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.1s;
            user-select: none;
            position: relative;
        }

        .click-button:hover {
            transform: scale(1.05);
            box-shadow: 0 25px 70px rgba(255, 215, 0, 0.6);
        }

        .click-button:active {
            transform: scale(0.95);
        }

        .click-effect {
            position: fixed;
            font-size: 2.5em;
            font-weight: 900;
            color: #ffd700;
            text-shadow:
                0 0 10px rgba(255, 215, 0, 1),
                0 0 20px rgba(255, 215, 0, 0.8),
                2px 2px 4px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            animation: floatUp 1.5s ease-out forwards;
            z-index: 9999;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateY(-50px) scale(1.3);
            }
            100% {
                opacity: 0;
                transform: translateY(-120px) scale(1.5);
            }
        }

        .upgrade-item, .generator-item {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upgrade-item:hover, .generator-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
            border-color: #ffd700;
        }

        .upgrade-item.locked, .generator-item.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .item-name {
            font-size: 1.1em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .item-count {
            background: rgba(255, 215, 0, 0.3);
            padding: 4px 12px;
            border-radius: 15px;
            font-weight: 700;
        }

        .item-description {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 8px;
        }

        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-cost {
            font-size: 1.1em;
            font-weight: 700;
            color: #ffd700;
        }

        .item-production {
            font-size: 0.9em;
            color: #4ade80;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #ffd700;
        }

        .btn-reset {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #f87171, #ef4444);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .btn-reset:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(248, 113, 113, 0.4);
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }

            .click-button {
                width: 250px;
                height: 250px;
                font-size: 6em;
            }
        }

        /* Scrollbar custom */
        .sidebar::-webkit-scrollbar {
            width: 8px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 215, 0, 0.5);
            border-radius: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 215, 0, 0.8);
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="title">üç™ Cookie Clicker Pro</div>
        <div class="score-display" id="scoreDisplay">0</div>
        <div class="per-second" id="perSecond">+0/sec</div>
        <div class="per-click-display" id="perClickDisplay">Par clic: +1</div>
    </div>

    <div class="main-container">
        <!-- Left Sidebar: Upgrades -->
        <div class="sidebar">
            <div class="section-title">‚¨ÜÔ∏è Am√©liorations</div>
            <div id="upgradesList"></div>
        </div>

        <!-- Center: Clicker -->
        <div class="clicker-section">
            <div class="click-button" id="clickButton">
                üç™
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-label">Clics Totaux</div>
                    <div class="stat-value" id="totalClicks">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Par Clic</div>
                    <div class="stat-value" id="perClick">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Par Seconde</div>
                    <div class="stat-value" id="perSecStats">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">G√©n√©rateurs</div>
                    <div class="stat-value" id="totalGenerators">0</div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar: Auto-Clickers -->
        <div class="sidebar">
            <div class="section-title">ü§ñ G√©n√©rateurs Auto</div>
            <div id="generatorsList"></div>

            <button class="btn-reset" id="resetButton">üîÑ Reset Progression</button>
        </div>
    </div>

    <script>
        // ==================== GAME STATE ====================
        const gameState = {
            cookies: 0,
            totalClicks: 0,
            clickPower: 1,
            cookiesPerSecond: 0,

            upgrades: {},
            generators: {},

            stats: {
                totalCookies: 0,
                totalClicks: 0
            }
        };

        // ==================== UPGRADES ====================
        const upgradeDefinitions = {
            click_2x: {
                name: 'Double Clic',
                icon: 'üëÜ',
                description: 'Double la puissance de clic',
                baseCost: 100,
                effect: () => gameState.clickPower *= 2,
                level: 0,
                maxLevel: 1
            },
            click_5x: {
                name: 'Super Clic',
                icon: '‚úã',
                description: 'x5 la puissance de clic',
                baseCost: 1000,
                effect: () => gameState.clickPower *= 5,
                level: 0,
                maxLevel: 1,
                requires: ['click_2x']
            },
            click_10x: {
                name: 'M√©ga Clic',
                icon: 'üëä',
                description: 'x10 la puissance de clic',
                baseCost: 10000,
                effect: () => gameState.clickPower *= 10,
                level: 0,
                maxLevel: 1,
                requires: ['click_5x']
            },
            click_100x: {
                name: 'Ultra Clic',
                icon: 'üí•',
                description: 'x100 la puissance de clic !',
                baseCost: 100000,
                effect: () => gameState.clickPower *= 100,
                level: 0,
                maxLevel: 1,
                requires: ['click_10x']
            },
            auto_boost: {
                name: 'Boost Auto',
                icon: '‚ö°',
                description: 'G√©n√©rateurs +50%',
                baseCost: 5000,
                effect: () => {},
                multiplier: 1.5,
                level: 0,
                maxLevel: 1
            },
            auto_boost_2: {
                name: 'Mega Boost',
                icon: '‚ö°',
                description: 'G√©n√©rateurs x2',
                baseCost: 50000,
                effect: () => {},
                multiplier: 2,
                level: 0,
                maxLevel: 1,
                requires: ['auto_boost']
            },
            multi_click: {
                name: 'Multi-Clic',
                icon: 'üñ±Ô∏è',
                description: 'Chaque clic compte double',
                baseCost: 2500,
                effect: () => {},
                clickMultiplier: 2,
                level: 0,
                maxLevel: 1
            },
            multi_click_2: {
                name: 'Super Multi-Clic',
                icon: 'üñ±Ô∏è',
                description: 'Chaque clic compte x3',
                baseCost: 25000,
                effect: () => {},
                clickMultiplier: 3,
                level: 0,
                maxLevel: 1,
                requires: ['multi_click']
            }
        };

        // ==================== GENERATORS ====================
        const generatorDefinitions = {
            cursor: {
                name: 'Curseur',
                icon: '‚òùÔ∏è',
                description: 'Clique automatiquement',
                baseCost: 15,
                baseProduction: 0.1,
                costMultiplier: 1.15,
                count: 0
            },
            grandma: {
                name: 'Grand-m√®re',
                icon: 'üëµ',
                description: 'Une gentille grand-m√®re qui fait des cookies',
                baseCost: 100,
                baseProduction: 1,
                costMultiplier: 1.15,
                count: 0
            },
            farm: {
                name: 'Ferme',
                icon: 'üåæ',
                description: 'Cultive des ingr√©dients',
                baseCost: 1100,
                baseProduction: 8,
                costMultiplier: 1.15,
                count: 0
            },
            factory: {
                name: 'Usine',
                icon: 'üè≠',
                description: 'Production de masse',
                baseCost: 12000,
                baseProduction: 47,
                costMultiplier: 1.15,
                count: 0
            },
            mine: {
                name: 'Mine',
                icon: '‚õèÔ∏è',
                description: 'Extrait du chocolat pur',
                baseCost: 130000,
                baseProduction: 260,
                costMultiplier: 1.15,
                count: 0
            },
            spaceship: {
                name: 'Vaisseau Spatial',
                icon: 'üöÄ',
                description: 'Cookies depuis l\'espace',
                baseCost: 1400000,
                baseProduction: 1400,
                costMultiplier: 1.15,
                count: 0
            },
            portal: {
                name: 'Portail Dimensionnel',
                icon: 'üåÄ',
                description: 'Importe des cookies d\'autres dimensions',
                baseCost: 20000000,
                baseProduction: 7800,
                costMultiplier: 1.15,
                count: 0
            }
        };

        // ==================== FUNCTIONS ====================
        function formatNumber(num) {
            if (num < 1000) return Math.floor(num);
            if (num < 1000000) return (num / 1000).toFixed(2) + 'K';
            if (num < 1000000000) return (num / 1000000).toFixed(2) + 'M';
            if (num < 1000000000000) return (num / 1000000000).toFixed(2) + 'B';
            return (num / 1000000000000).toFixed(2) + 'T';
        }

        function handleClick(event) {
            console.log('Click d√©tect√©!', event);

            let clicks = 1;

            // Multi-click upgrades
            if (gameState.upgrades.multi_click) clicks *= upgradeDefinitions.multi_click.clickMultiplier;
            if (gameState.upgrades.multi_click_2) clicks *= upgradeDefinitions.multi_click_2.clickMultiplier;

            const cookiesGained = gameState.clickPower * clicks;
            gameState.cookies += cookiesGained;
            gameState.totalClicks += clicks;
            gameState.stats.totalClicks += clicks;
            gameState.stats.totalCookies += cookiesGained;

            console.log('Cookies gagn√©s:', cookiesGained, 'Total:', gameState.cookies);

            // Visual effect - seulement si event a les coordonn√©es
            if (event && event.clientX !== undefined && event.clientY !== undefined) {
                createClickEffect(event.clientX, event.clientY, cookiesGained);
            }

            updateUI();
        }

        function createClickEffect(x, y, value) {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.textContent = '+' + formatNumber(value) + ' üç™';

            // Position avec un peu de variation al√©atoire
            const offsetX = (Math.random() - 0.5) * 40;
            const offsetY = (Math.random() - 0.5) * 40;

            effect.style.left = (x + offsetX) + 'px';
            effect.style.top = (y + offsetY) + 'px';

            document.body.appendChild(effect);

            setTimeout(() => effect.remove(), 1500);
        }

        function getGeneratorCost(type) {
            const def = generatorDefinitions[type];
            const count = gameState.generators[type] || 0;
            return Math.floor(def.baseCost * Math.pow(def.costMultiplier, count));
        }

        function buyGenerator(type) {
            const cost = getGeneratorCost(type);

            if (gameState.cookies >= cost) {
                gameState.cookies -= cost;
                gameState.generators[type] = (gameState.generators[type] || 0) + 1;

                console.log('G√©n√©rateur achet√©:', type, 'Count:', gameState.generators[type]);

                updateProduction();
                console.log('Production par seconde:', gameState.cookiesPerSecond);

                updateUI();
                saveGame();
            }
        }

        function buyUpgrade(id) {
            const upgrade = upgradeDefinitions[id];

            // Check if already bought
            if (gameState.upgrades[id]) return;

            // Check requirements
            if (upgrade.requires) {
                const hasRequirements = upgrade.requires.every(req => gameState.upgrades[req]);
                if (!hasRequirements) return;
            }

            if (gameState.cookies >= upgrade.baseCost) {
                gameState.cookies -= upgrade.baseCost;
                gameState.upgrades[id] = true;

                if (upgrade.effect) upgrade.effect();

                updateProduction();
                updateUI();
                saveGame();
            }
        }

        function updateProduction() {
            let total = 0;

            // Calculate base production from generators
            Object.entries(gameState.generators).forEach(([type, count]) => {
                const def = generatorDefinitions[type];
                total += def.baseProduction * count;
            });

            // Apply upgrade multipliers
            if (gameState.upgrades.auto_boost) {
                total *= upgradeDefinitions.auto_boost.multiplier;
            }
            if (gameState.upgrades.auto_boost_2) {
                total *= upgradeDefinitions.auto_boost_2.multiplier;
            }

            gameState.cookiesPerSecond = total;
        }

        function updateUI() {
            // Update header
            const scoreEl = document.getElementById('scoreDisplay');
            if (scoreEl) {
                scoreEl.textContent = formatNumber(gameState.cookies);
            }

            const perSecondEl = document.getElementById('perSecond');
            if (perSecondEl) {
                perSecondEl.textContent = '+' + formatNumber(gameState.cookiesPerSecond) + '/sec';
            }

            // Calculate effective click power
            let effectiveClickPower = gameState.clickPower;
            if (gameState.upgrades.multi_click) effectiveClickPower *= upgradeDefinitions.multi_click.clickMultiplier;
            if (gameState.upgrades.multi_click_2) effectiveClickPower *= upgradeDefinitions.multi_click_2.clickMultiplier;

            const perClickDisplayEl = document.getElementById('perClickDisplay');
            if (perClickDisplayEl) {
                perClickDisplayEl.textContent = 'Par clic: +' + formatNumber(effectiveClickPower) + ' üç™';
            }

            // Update stats
            const totalClicksEl = document.getElementById('totalClicks');
            if (totalClicksEl) {
                totalClicksEl.textContent = formatNumber(gameState.stats.totalClicks);
            }

            const perClickEl = document.getElementById('perClick');
            if (perClickEl) {
                perClickEl.textContent = formatNumber(gameState.clickPower);
            }

            const perSecStatsEl = document.getElementById('perSecStats');
            if (perSecStatsEl) {
                perSecStatsEl.textContent = formatNumber(gameState.cookiesPerSecond);
            }

            const totalGens = Object.values(gameState.generators).reduce((a, b) => a + b, 0);
            const totalGensEl = document.getElementById('totalGenerators');
            if (totalGensEl) {
                totalGensEl.textContent = totalGens;
            }

            // Update upgrades list
            renderUpgrades();

            // Update generators list
            renderGenerators();
        }

        function renderUpgrades() {
            const container = document.getElementById('upgradesList');
            let html = '';

            Object.entries(upgradeDefinitions).forEach(([id, upgrade]) => {
                const owned = gameState.upgrades[id];
                const canAfford = gameState.cookies >= upgrade.baseCost;
                const hasRequirements = !upgrade.requires || upgrade.requires.every(req => gameState.upgrades[req]);

                if (owned || hasRequirements) {
                    html += `
                        <div class="upgrade-item ${owned ? 'locked' : (!canAfford ? 'locked' : '')}"
                             data-upgrade-id="${id}" ${!owned ? 'data-can-buy="true"' : ''}>
                            <div class="item-header">
                                <div class="item-name">${upgrade.icon} ${upgrade.name}</div>
                            </div>
                            <div class="item-description">${upgrade.description}</div>
                            <div class="item-footer">
                                ${owned ?
                                    '<span style="color: #4ade80; font-weight: 700;">‚úÖ ACHET√â</span>' :
                                    `<span class="item-cost">üç™ ${formatNumber(upgrade.baseCost)}</span>`
                                }
                            </div>
                        </div>
                    `;
                }
            });

            container.innerHTML = html || '<div style="text-align: center; opacity: 0.5;">Aucune am√©lioration disponible</div>';

            // Add click listeners to upgrades
            container.querySelectorAll('.upgrade-item[data-can-buy="true"]').forEach(item => {
                item.addEventListener('click', () => {
                    buyUpgrade(item.dataset.upgradeId);
                });
            });
        }

        function renderGenerators() {
            const container = document.getElementById('generatorsList');
            let html = '';

            Object.entries(generatorDefinitions).forEach(([type, def]) => {
                const count = gameState.generators[type] || 0;
                const cost = getGeneratorCost(type);
                const canAfford = gameState.cookies >= cost;

                // Production par unit√© et production totale
                let productionPerUnit = def.baseProduction;

                // Appliquer les boosts aux g√©n√©rateurs
                if (gameState.upgrades.auto_boost) {
                    productionPerUnit *= upgradeDefinitions.auto_boost.multiplier;
                }
                if (gameState.upgrades.auto_boost_2) {
                    productionPerUnit *= upgradeDefinitions.auto_boost_2.multiplier;
                }

                const totalProduction = productionPerUnit * count;

                html += `
                    <div class="generator-item ${!canAfford ? 'locked' : ''}" data-generator-type="${type}">
                        <div class="item-header">
                            <div class="item-name">${def.icon} ${def.name}</div>
                            <div class="item-count">${count}</div>
                        </div>
                        <div class="item-description">${def.description}</div>
                        <div class="item-footer">
                            <span class="item-cost">üç™ ${formatNumber(cost)}</span>
                            <span class="item-production" style="display: flex; flex-direction: column; align-items: flex-end; gap: 2px;">
                                <span style="color: #4ade80;">Chaque: +${formatNumber(productionPerUnit)}/s</span>
                                ${count > 0 ? `<span style="color: #fbbf24; font-size: 0.85em;">Total: +${formatNumber(totalProduction)}/s</span>` : ''}
                            </span>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;

            // Add click listeners to generators
            container.querySelectorAll('.generator-item').forEach(item => {
                item.addEventListener('click', () => {
                    buyGenerator(item.dataset.generatorType);
                });
            });
        }

        function gameLoop() {
            if (gameState.cookiesPerSecond > 0) {
                gameState.cookies += gameState.cookiesPerSecond / 10; // Update 10 times per second
                gameState.stats.totalCookies += gameState.cookiesPerSecond / 10;

                // Update display
                const scoreEl = document.getElementById('scoreDisplay');
                if (scoreEl) {
                    scoreEl.textContent = formatNumber(gameState.cookies);
                }

                const perSecondEl = document.getElementById('perSecond');
                if (perSecondEl) {
                    perSecondEl.textContent = '+' + formatNumber(gameState.cookiesPerSecond) + '/sec';
                }
            }
        }

        function saveGame() {
            localStorage.setItem('cookieClickerSave', JSON.stringify(gameState));
        }

        function loadGame() {
            const save = localStorage.getItem('cookieClickerSave');
            if (save) {
                try {
                    Object.assign(gameState, JSON.parse(save));
                    updateProduction();
                } catch (e) {
                    console.error('Failed to load save:', e);
                }
            }
        }

        function resetGame() {
            if (confirm('√ätes-vous s√ªr de vouloir reset ? Toute progression sera perdue !')) {
                localStorage.removeItem('cookieClickerSave');
                location.reload();
            }
        }

        // ==================== INIT ====================
        // Add event listeners
        document.getElementById('clickButton').addEventListener('click', handleClick);
        document.getElementById('resetButton').addEventListener('click', resetGame);

        loadGame();
        updateProduction();
        updateUI();

        console.log('%cüç™ Cookie Clicker Pro loaded!', 'color: #ffd700; font-size: 20px; font-weight: bold;');
        console.log('√âtat initial:');
        console.log('- Cookies:', gameState.cookies);
        console.log('- G√©n√©rateurs:', gameState.generators);
        console.log('- Production/sec:', gameState.cookiesPerSecond);

        // Game loop - 10 times per second for smooth production
        setInterval(gameLoop, 100);

        // Auto-save every 5 seconds
        setInterval(saveGame, 5000);
    </script>
</body>
</html>
