<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MegaCorp Tycoon - Business Empire Builder</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: white;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 20px 30px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.5);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .company-name {
            font-size: 2em;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .resources-bar {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .resource {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .resource-label {
            font-size: 0.8em;
            color: rgba(255,255,255,0.7);
            margin-bottom: 3px;
        }

        .resource-value {
            font-size: 1.3em;
            font-weight: 700;
        }

        .resource-value.positive {
            color: #4ade80;
        }

        .resource-value.negative {
            color: #f87171;
        }

        .main-container {
            display: grid;
            grid-template-columns: 280px 1fr 350px;
            gap: 20px;
            padding: 30px;
            max-width: 2000px;
            margin: 0 auto;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .nav-button {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Montserrat', sans-serif;
        }

        .nav-button:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }

        .nav-button.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
        }

        .main-content {
            background: rgba(255,255,255,0.03);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            min-height: 600px;
        }

        .right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
        }

        .panel-title {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title {
            font-size: 2em;
            font-weight: 900;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: #667eea;
        }

        .card {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .card:hover {
            background: rgba(255,255,255,0.08);
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102,126,234,0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.5em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .badge {
            background: rgba(102,126,234,0.3);
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-box {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: rgba(255,255,255,0.6);
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: 900;
            color: #4ade80;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102,126,234,0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f87171, #ef4444);
            color: white;
        }

        .btn:disabled {
            background: rgba(255,255,255,0.1);
            cursor: not-allowed;
            transform: none;
        }

        .employee-card {
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));
            border: 2px solid rgba(102,126,234,0.3);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .employee-name {
            font-weight: 700;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .skill-bars {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 12px;
        }

        .skill-bar {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 8px;
        }

        .skill-name {
            font-size: 0.8em;
            color: rgba(255,255,255,0.7);
            margin-bottom: 5px;
        }

        .skill-value {
            font-weight: 700;
            color: #4ade80;
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
        }

        .market-item {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
            border-left: 4px solid #667eea;
        }

        .market-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .price {
            font-size: 1.3em;
            font-weight: 700;
            color: #fbbf24;
        }

        .trend {
            font-size: 0.9em;
            font-weight: 600;
        }

        .trend.up {
            color: #4ade80;
        }

        .trend.down {
            color: #f87171;
        }

        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            max-width: 350px;
            animation: slideInRight 0.5s;
            z-index: 1000;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(500px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            white-space: nowrap;
            font-size: 0.85em;
            z-index: 1000;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 25px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
        }

        .tab:hover {
            background: rgba(255,255,255,0.1);
        }

        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="company-name">
            <span>üè¢</span>
            <span id="companyName">MegaCorp Inc.</span>
        </div>
        <div class="resources-bar">
            <div class="resource">
                <div class="resource-label">Capital</div>
                <div class="resource-value" id="capital">$100,000</div>
            </div>
            <div class="resource">
                <div class="resource-label">Revenu/mois</div>
                <div class="resource-value positive" id="income">+$0</div>
            </div>
            <div class="resource">
                <div class="resource-label">R√©putation</div>
                <div class="resource-value" id="reputation">50</div>
            </div>
            <div class="resource">
                <div class="resource-label">Parts de March√©</div>
                <div class="resource-value" id="marketshare">0%</div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <button class="nav-button active" onclick="switchView('dashboard')">
                <span>üìä</span> Dashboard
            </button>
            <button class="nav-button" onclick="switchView('departments')">
                <span>üè≠</span> D√©partements
            </button>
            <button class="nav-button" onclick="switchView('employees')">
                <span>üë•</span> Employ√©s
            </button>
            <button class="nav-button" onclick="switchView('research')">
                <span>üî¨</span> R&D
            </button>
            <button class="nav-button" onclick="switchView('marketing')">
                <span>üì£</span> Marketing
            </button>
            <button class="nav-button" onclick="switchView('expansion')">
                <span>üåç</span> Expansion
            </button>
            <button class="nav-button" onclick="switchView('market')">
                <span>üìà</span> March√©
            </button>
            <button class="nav-button" onclick="switchView('stats')">
                <span>üìâ</span> Statistiques
            </button>
        </div>

        <div class="main-content" id="mainContent"></div>

        <div class="right-panel">
            <div class="panel">
                <div class="panel-title">üì∞ Actualit√©s</div>
                <div id="newsFeed"></div>
            </div>

            <div class="panel">
                <div class="panel-title">üéØ Objectifs</div>
                <div id="objectives"></div>
            </div>
        </div>
    </div>

    <div id="notifications"></div>

    <script>
        // ==================== GAME STATE ====================
        const gameState = {
            capital: 100000,
            income: 0,
            expenses: 0,
            reputation: 50,
            marketShare: 0,

            departments: {
                production: { level: 0, capacity: 0, efficiency: 1 },
                sales: { level: 0, performance: 0, efficiency: 1 },
                rnd: { level: 0, innovation: 0, efficiency: 1 },
                marketing: { level: 0, reach: 0, efficiency: 1 },
                hr: { level: 0, morale: 100, efficiency: 1 }
            },

            employees: [],
            research: {},
            marketingCampaigns: [],
            cities: ['New York'],
            products: [],

            stats: {
                totalRevenue: 0,
                totalExpenses: 0,
                employeesHired: 0,
                productsLaunched: 0,
                researchCompleted: 0,
                citiesExpanded: 1,
                monthsPlayed: 0
            },

            currentView: 'dashboard',
            news: [],
            month: 1,
            year: 2024
        };

        // ==================== DEFINITIONS ====================
        const departmentDefinitions = {
            production: {
                name: 'Production',
                icon: 'üè≠',
                description: 'Fabrique vos produits',
                baseCost: 50000,
                costMultiplier: 1.5,
                monthlyCost: 5000,
                benefits: 'Augmente la capacit√© de production'
            },
            sales: {
                name: 'Ventes',
                icon: 'üíº',
                description: 'Vend vos produits',
                baseCost: 30000,
                costMultiplier: 1.4,
                monthlyCost: 4000,
                benefits: 'Augmente le chiffre d\'affaires'
            },
            rnd: {
                name: 'R&D',
                icon: 'üî¨',
                description: 'Recherche et d√©veloppement',
                baseCost: 75000,
                costMultiplier: 1.6,
                monthlyCost: 8000,
                benefits: 'D√©bloque nouveaux produits et technologies'
            },
            marketing: {
                name: 'Marketing',
                icon: 'üì£',
                description: 'Promeut votre marque',
                baseCost: 40000,
                costMultiplier: 1.45,
                monthlyCost: 6000,
                benefits: 'Augmente r√©putation et parts de march√©'
            },
            hr: {
                name: 'Ressources Humaines',
                icon: 'üë•',
                description: 'G√®re vos employ√©s',
                baseCost: 35000,
                costMultiplier: 1.4,
                monthlyCost: 3500,
                benefits: 'Augmente moral et efficacit√© des employ√©s'
            }
        };

        const researchDefinitions = {
            automation_1: {
                name: 'Automation I',
                icon: 'ü§ñ',
                description: 'Augmente efficacit√© production de 25%',
                cost: 100000,
                time: 3,
                effect: () => gameState.departments.production.efficiency *= 1.25,
                requires: []
            },
            automation_2: {
                name: 'Automation II',
                icon: 'ü§ñ',
                description: 'Augmente efficacit√© production de 50%',
                cost: 500000,
                time: 6,
                effect: () => gameState.departments.production.efficiency *= 1.5,
                requires: ['automation_1']
            },
            marketing_boost_1: {
                name: 'Marketing Digital',
                icon: 'üíª',
                description: 'Marketing 30% plus efficace',
                cost: 150000,
                time: 4,
                effect: () => gameState.departments.marketing.efficiency *= 1.3,
                requires: []
            },
            sales_training: {
                name: 'Formation Ventes',
                icon: 'üìö',
                description: 'Ventes 40% plus efficaces',
                cost: 200000,
                time: 5,
                effect: () => gameState.departments.sales.efficiency *= 1.4,
                requires: []
            },
            ai_research: {
                name: 'Intelligence Artificielle',
                icon: 'üß†',
                description: 'Toutes les op√©rations +20%',
                cost: 1000000,
                time: 12,
                effect: () => {
                    Object.values(gameState.departments).forEach(d => d.efficiency *= 1.2);
                },
                requires: ['automation_2']
            },
            global_expansion: {
                name: 'Expansion Globale',
                icon: 'üåç',
                description: 'R√©duit co√ªts d\'expansion de 30%',
                cost: 750000,
                time: 8,
                effect: () => {},
                requires: []
            },
            quality_control: {
                name: 'Contr√¥le Qualit√©',
                icon: '‚úÖ',
                description: 'R√©putation +10 par mois',
                cost: 300000,
                time: 6,
                effect: () => {},
                requires: []
            }
        };

        const cityDefinitions = {
            'Los Angeles': { cost: 200000, marketSize: 15000000, competition: 0.7 },
            'Chicago': { cost: 150000, marketSize: 12000000, competition: 0.6 },
            'London': { cost: 500000, marketSize: 30000000, competition: 0.8 },
            'Paris': { cost: 450000, marketSize: 25000000, competition: 0.75 },
            'Tokyo': { cost: 800000, marketSize: 50000000, competition: 0.9 },
            'Shanghai': { cost: 900000, marketSize: 60000000, competition: 0.85 },
            'Mumbai': { cost: 600000, marketSize: 40000000, competition: 0.7 },
            'Dubai': { cost: 550000, marketSize: 20000000, competition: 0.65 }
        };

        // ==================== GAME LOGIC ====================
        function formatMoney(amount) {
            if (amount < 0) return '-$' + Math.abs(amount).toLocaleString();
            return '$' + amount.toLocaleString();
        }

        function generateEmployee() {
            const names = ['Alice', 'Bob', 'Charlie', 'Diana', 'Eve', 'Frank', 'Grace', 'Henry', 'Ivy', 'Jack', 'Kate', 'Leo', 'Maya', 'Noah', 'Olivia', 'Paul', 'Quinn', 'Ruby', 'Sam', 'Tara'];
            const roles = [
                { title: 'Ing√©nieur', icon: '‚öôÔ∏è', dept: 'production', salary: 5000 },
                { title: 'Commercial', icon: 'üíº', dept: 'sales', salary: 4500 },
                { title: 'Chercheur', icon: 'üî¨', dept: 'rnd', salary: 6000 },
                { title: 'Marketing', icon: 'üì£', dept: 'marketing', salary: 4000 },
                { title: 'RH', icon: 'üë•', dept: 'hr', salary: 3500 }
            ];

            const name = names[Math.floor(Math.random() * names.length)];
            const role = roles[Math.floor(Math.random() * roles.length)];

            return {
                id: Date.now() + Math.random(),
                name: name,
                role: role.title,
                icon: role.icon,
                department: role.dept,
                salary: role.salary,
                skills: {
                    productivity: Math.floor(Math.random() * 50) + 50,
                    creativity: Math.floor(Math.random() * 50) + 50,
                    leadership: Math.floor(Math.random() * 50) + 50
                },
                morale: 100,
                experience: 0
            };
        }

        function hirEmployee() {
            const employee = generateEmployee();

            if (gameState.capital >= employee.salary * 3) {
                gameState.capital -= employee.salary * 3; // Hiring cost
                gameState.employees.push(employee);
                gameState.stats.employeesHired++;

                updateIncomeExpenses();
                updateUI();
                showNotification(`${employee.icon} ${employee.name} embauch√©(e) comme ${employee.role}!`);
                addNews(`Nouvel employ√©: ${employee.name} rejoint le d√©partement ${departmentDefinitions[employee.department].name}`);
                saveGame();
            }
        }

        function fireEmployee(id) {
            const index = gameState.employees.findIndex(e => e.id === id);
            if (index !== -1) {
                const emp = gameState.employees[index];
                gameState.employees.splice(index, 1);
                updateIncomeExpenses();
                updateUI();
                showNotification(`${emp.name} a √©t√© licenci√©(e)`);
                saveGame();
            }
        }

        function upgradeDepartment(dept) {
            const def = departmentDefinitions[dept];
            const currentLevel = gameState.departments[dept].level;
            const cost = Math.floor(def.baseCost * Math.pow(def.costMultiplier, currentLevel));

            if (gameState.capital >= cost) {
                gameState.capital -= cost;
                gameState.departments[dept].level++;
                updateIncomeExpenses();
                updateUI();
                showNotification(`${def.icon} ${def.name} am√©lior√© au niveau ${gameState.departments[dept].level}!`);
                addNews(`Le d√©partement ${def.name} a √©t√© am√©lior√©!`);
                saveGame();
            }
        }

        function startResearch(researchId) {
            const research = researchDefinitions[researchId];

            // Check requirements
            if (research.requires && !research.requires.every(r => gameState.research[r])) {
                showNotification('Recherches pr√©alables requises', 'error');
                return;
            }

            if (gameState.research[researchId]) {
                showNotification('D√©j√† recherch√©', 'error');
                return;
            }

            if (gameState.capital >= research.cost) {
                gameState.capital -= research.cost;
                gameState.research[researchId] = { progress: 0, total: research.time };
                updateUI();
                showNotification(`üî¨ Recherche lanc√©e: ${research.name}`);
                addNews(`Recherche lanc√©e: ${research.name} (${research.time} mois)`);
                saveGame();
            }
        }

        function launchMarketingCampaign(type) {
            const campaigns = {
                social_media: { name: 'R√©seaux Sociaux', cost: 10000, reputation: 5, marketShare: 0.5 },
                tv_ads: { name: 'Publicit√© TV', cost: 50000, reputation: 15, marketShare: 2 },
                influencer: { name: 'Influenceurs', cost: 25000, reputation: 10, marketShare: 1 },
                billboard: { name: 'Affichage', cost: 30000, reputation: 8, marketShare: 1.5 }
            };

            const campaign = campaigns[type];

            if (gameState.capital >= campaign.cost) {
                gameState.capital -= campaign.cost;
                gameState.reputation += campaign.reputation;
                gameState.marketShare += campaign.marketShare;

                updateUI();
                showNotification(`üì£ Campagne ${campaign.name} lanc√©e!`);
                addNews(`Campagne marketing r√©ussie: ${campaign.name}`);
                saveGame();
            }
        }

        function expandToCity(city) {
            const def = cityDefinitions[city];
            const cost = gameState.research.global_expansion ? def.cost * 0.7 : def.cost;

            if (gameState.cities.includes(city)) {
                showNotification('D√©j√† pr√©sent dans cette ville', 'error');
                return;
            }

            if (gameState.capital >= cost) {
                gameState.capital -= cost;
                gameState.cities.push(city);
                gameState.marketShare += 5;
                gameState.stats.citiesExpanded++;

                updateIncomeExpenses();
                updateUI();
                showNotification(`üåç Expansion r√©ussie √† ${city}!`);
                addNews(`MegaCorp ouvre un nouveau bureau √† ${city}!`);
                saveGame();
            }
        }

        function updateIncomeExpenses() {
            // Calculate income
            let income = 0;

            // Base income from departments
            income += gameState.departments.production.level * 10000 * gameState.departments.production.efficiency;
            income += gameState.departments.sales.level * 15000 * gameState.departments.sales.efficiency;

            // Income from market share
            income += gameState.marketShare * 1000;

            // Income from cities
            income += gameState.cities.length * 5000;

            // Employee productivity bonus
            gameState.employees.forEach(emp => {
                income += (emp.skills.productivity / 10) * 100;
            });

            // Calculate expenses
            let expenses = 0;

            // Department costs
            Object.entries(gameState.departments).forEach(([key, dept]) => {
                expenses += departmentDefinitions[key].monthlyCost * dept.level;
            });

            // Employee salaries
            gameState.employees.forEach(emp => {
                expenses += emp.salary;
            });

            gameState.income = Math.floor(income);
            gameState.expenses = Math.floor(expenses);
        }

        function monthlyUpdate() {
            gameState.month++;
            if (gameState.month > 12) {
                gameState.month = 1;
                gameState.year++;
            }
            gameState.stats.monthsPlayed++;

            // Apply income/expenses
            const netIncome = gameState.income - gameState.expenses;
            gameState.capital += netIncome;
            gameState.stats.totalRevenue += Math.max(0, netIncome);
            gameState.stats.totalExpenses += gameState.expenses;

            // Research progress
            Object.keys(gameState.research).forEach(key => {
                const r = gameState.research[key];
                if (r.progress !== undefined) {
                    r.progress++;
                    if (r.progress >= r.total) {
                        delete r.progress;
                        delete r.total;
                        researchDefinitions[key].effect();
                        gameState.stats.researchCompleted++;
                        showNotification(`‚úÖ Recherche compl√©t√©e: ${researchDefinitions[key].name}!`);
                        addNews(`Recherche compl√©t√©e: ${researchDefinitions[key].name}`);
                    }
                }
            });

            // Quality control research effect
            if (gameState.research.quality_control && !gameState.research.quality_control.progress) {
                gameState.reputation += 10;
            }

            // Employee experience
            gameState.employees.forEach(emp => {
                emp.experience += 1;
                if (emp.experience % 12 === 0) {
                    // Level up skills
                    emp.skills.productivity = Math.min(100, emp.skills.productivity + 5);
                    emp.skills.creativity = Math.min(100, emp.skills.creativity + 5);
                    emp.skills.leadership = Math.min(100, emp.skills.leadership + 5);
                }
            });

            // Random events
            if (Math.random() < 0.2) {
                triggerRandomEvent();
            }

            updateIncomeExpenses();
            updateUI();
            addNews(`Mois ${gameState.month}/${gameState.year}: ${netIncome >= 0 ? 'B√©n√©fice' : 'Perte'} de ${formatMoney(Math.abs(netIncome))}`);
            saveGame();
        }

        function triggerRandomEvent() {
            const events = [
                {
                    text: 'Boom √©conomique ! +$50,000',
                    effect: () => gameState.capital += 50000
                },
                {
                    text: 'Concurrent agressif ! Parts de march√© -2%',
                    effect: () => gameState.marketShare = Math.max(0, gameState.marketShare - 2)
                },
                {
                    text: 'Innovation breakthrough ! R√©putation +20',
                    effect: () => gameState.reputation += 20
                },
                {
                    text: 'Scandale m√©diatique ! R√©putation -15',
                    effect: () => gameState.reputation = Math.max(0, gameState.reputation - 15)
                },
                {
                    text: 'Subvention gouvernementale ! +$100,000',
                    effect: () => gameState.capital += 100000
                },
                {
                    text: 'Gr√®ve des employ√©s ! -$30,000',
                    effect: () => gameState.capital -= 30000
                }
            ];

            const event = events[Math.floor(Math.random() * events.length)];
            event.effect();
            showNotification('üì∞ ' + event.text);
            addNews('√âV√âNEMENT: ' + event.text);
        }

        function addNews(text) {
            gameState.news.unshift({
                text: text,
                time: `Mois ${gameState.month}/${gameState.year}`
            });
            if (gameState.news.length > 10) gameState.news.pop();
        }

        // ==================== UI ====================
        function updateUI() {
            // Update header
            document.getElementById('capital').textContent = formatMoney(gameState.capital);
            document.getElementById('income').textContent = formatMoney(gameState.income - gameState.expenses);
            document.getElementById('income').className = 'resource-value ' + (gameState.income - gameState.expenses >= 0 ? 'positive' : 'negative');
            document.getElementById('reputation').textContent = gameState.reputation;
            document.getElementById('marketshare').textContent = gameState.marketShare.toFixed(1) + '%';

            // Update main content
            updateMainContent();

            // Update right panel
            updateNewsFeed();
            updateObjectives();
        }

        function switchView(view) {
            gameState.currentView = view;
            document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
            event.target.closest('.nav-button').classList.add('active');
            updateMainContent();
        }

        function updateMainContent() {
            const content = document.getElementById('mainContent');

            switch(gameState.currentView) {
                case 'dashboard':
                    content.innerHTML = renderDashboard();
                    break;
                case 'departments':
                    content.innerHTML = renderDepartments();
                    break;
                case 'employees':
                    content.innerHTML = renderEmployees();
                    break;
                case 'research':
                    content.innerHTML = renderResearch();
                    break;
                case 'marketing':
                    content.innerHTML = renderMarketing();
                    break;
                case 'expansion':
                    content.innerHTML = renderExpansion();
                    break;
                case 'market':
                    content.innerHTML = renderMarket();
                    break;
                case 'stats':
                    content.innerHTML = renderStats();
                    break;
            }
        }

        function renderDashboard() {
            const netIncome = gameState.income - gameState.expenses;

            return `
                <div class="section-title">üìä Dashboard Ex√©cutif</div>

                <div class="grid-2">
                    <div class="stat-box">
                        <div class="stat-label">Capital</div>
                        <div class="stat-value">${formatMoney(gameState.capital)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Revenu Net/Mois</div>
                        <div class="stat-value" style="color: ${netIncome >= 0 ? '#4ade80' : '#f87171'}">
                            ${formatMoney(netIncome)}
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Employ√©s</div>
                        <div class="stat-value">${gameState.employees.length}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Villes</div>
                        <div class="stat-value">${gameState.cities.length}</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">‚è±Ô∏è Contr√¥le Temporel</div>
                        <div class="badge">${gameState.month}/${gameState.year}</div>
                    </div>
                    <button class="btn btn-primary" onclick="monthlyUpdate()">
                        Avancer d'un mois ‚è≠Ô∏è
                    </button>
                </div>

                <div class="card">
                    <div class="card-title">üè¢ Vue d'ensemble des D√©partements</div>
                    <div class="grid">
                        ${Object.entries(gameState.departments).map(([key, dept]) => {
                            const def = departmentDefinitions[key];
                            return `
                                <div class="stat-box">
                                    <div style="font-size: 2em; margin-bottom: 10px;">${def.icon}</div>
                                    <div style="font-weight: 700; margin-bottom: 5px;">${def.name}</div>
                                    <div style="font-size: 1.5em; color: #667eea;">Niv. ${dept.level}</div>
                                    <div style="font-size: 0.85em; color: rgba(255,255,255,0.6); margin-top: 5px;">
                                        Efficacit√©: ${(dept.efficiency * 100).toFixed(0)}%
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">üìà Performance Mensuelle</div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div>Revenus: <span style="color: #4ade80; font-weight: 700;">${formatMoney(gameState.income)}</span></div>
                        <div>D√©penses: <span style="color: #f87171; font-weight: 700;">${formatMoney(gameState.expenses)}</span></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${Math.min(100, (gameState.income / (gameState.income + gameState.expenses)) * 100)}%; background: ${netIncome >= 0 ? 'linear-gradient(90deg, #4ade80, #22c55e)' : 'linear-gradient(90deg, #f87171, #ef4444)'}">
                            ${((gameState.income / (gameState.income + gameState.expenses)) * 100).toFixed(1)}%
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDepartments() {
            return `
                <div class="section-title">üè≠ D√©partements</div>
                <div class="grid">
                    ${Object.entries(departmentDefinitions).map(([key, def]) => {
                        const dept = gameState.departments[key];
                        const cost = Math.floor(def.baseCost * Math.pow(def.costMultiplier, dept.level));
                        const canAfford = gameState.capital >= cost;

                        return `
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">${def.icon} ${def.name}</div>
                                    <div class="badge">Niv. ${dept.level}</div>
                                </div>
                                <div style="color: rgba(255,255,255,0.7); margin-bottom: 15px;">
                                    ${def.description}
                                </div>
                                <div class="grid-2">
                                    <div class="stat-box">
                                        <div class="stat-label">Efficacit√©</div>
                                        <div class="stat-value">${(dept.efficiency * 100).toFixed(0)}%</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">Co√ªt/mois</div>
                                        <div class="stat-value" style="color: #f87171; font-size: 1.2em;">
                                            ${formatMoney(def.monthlyCost * dept.level)}
                                        </div>
                                    </div>
                                </div>
                                <div style="margin: 15px 0; padding: 12px; background: rgba(102,126,234,0.1); border-radius: 8px; font-size: 0.9em;">
                                    ‚ú® ${def.benefits}
                                </div>
                                <button class="btn btn-primary" onclick="upgradeDepartment('${key}')" ${!canAfford ? 'disabled' : ''}>
                                    Am√©liorer (${formatMoney(cost)})
                                </button>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function renderEmployees() {
            return `
                <div class="section-title">üë• Gestion des Employ√©s</div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">‚ûï Recruter</div>
                        <button class="btn btn-success" onclick="hireEmployee()">
                            Embaucher un nouvel employ√©
                        </button>
                    </div>
                    <div style="color: rgba(255,255,255,0.7);">
                        Co√ªt d'embauche: environ $10,000-$18,000 (3 mois de salaire)
                    </div>
                </div>

                <div class="section-title" style="font-size: 1.5em; margin-top: 30px;">üìã Employ√©s Actuels (${gameState.employees.length})</div>

                ${gameState.employees.length === 0 ? `
                    <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">
                        Aucun employ√©. Commencez par embaucher !
                    </div>
                ` : gameState.employees.map(emp => `
                    <div class="employee-card">
                        <div class="employee-header">
                            <div class="employee-name">${emp.icon} ${emp.name}</div>
                            <div>
                                <span class="badge">${emp.role}</span>
                                <button class="btn btn-danger" style="margin-left: 10px; padding: 8px 16px; font-size: 0.9em;" onclick="fireEmployee(${emp.id})">
                                    Licencier
                                </button>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <div>
                                <span style="color: rgba(255,255,255,0.7);">D√©partement:</span>
                                <span style="font-weight: 700;"> ${departmentDefinitions[emp.department].name}</span>
                            </div>
                            <div>
                                <span style="color: rgba(255,255,255,0.7);">Salaire:</span>
                                <span style="font-weight: 700; color: #fbbf24;"> ${formatMoney(emp.salary)}/mois</span>
                            </div>
                            <div>
                                <span style="color: rgba(255,255,255,0.7);">Exp√©rience:</span>
                                <span style="font-weight: 700;"> ${emp.experience} mois</span>
                            </div>
                        </div>
                        <div class="skill-bars">
                            <div class="skill-bar">
                                <div class="skill-name">Productivit√©</div>
                                <div class="skill-value">${emp.skills.productivity}</div>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-name">Cr√©ativit√©</div>
                                <div class="skill-value">${emp.skills.creativity}</div>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-name">Leadership</div>
                                <div class="skill-value">${emp.skills.leadership}</div>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderResearch() {
            return `
                <div class="section-title">üî¨ Recherche & D√©veloppement</div>
                <div class="grid">
                    ${Object.entries(researchDefinitions).map(([key, research]) => {
                        const state = gameState.research[key];
                        const completed = state && !state.progress;
                        const inProgress = state && state.progress !== undefined;
                        const canResearch = !state && (!research.requires || research.requires.every(r => gameState.research[r] && !gameState.research[r].progress));
                        const canAfford = gameState.capital >= research.cost;

                        return `
                            <div class="card" style="${completed ? 'border-color: #4ade80; background: rgba(74,222,128,0.1);' : ''}">
                                <div style="font-size: 3em; margin-bottom: 10px;">${research.icon}</div>
                                <div class="card-title" style="font-size: 1.3em;">${research.name}</div>
                                <div style="color: rgba(255,255,255,0.7); margin: 10px 0; min-height: 60px;">
                                    ${research.description}
                                </div>
                                <div style="margin: 10px 0;">
                                    <div style="color: #fbbf24; font-weight: 700;">Co√ªt: ${formatMoney(research.cost)}</div>
                                    <div style="color: rgba(255,255,255,0.7);">Dur√©e: ${research.time} mois</div>
                                </div>
                                ${inProgress ? `
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${(state.progress / state.total * 100)}%">
                                            ${Math.floor(state.progress / state.total * 100)}%
                                        </div>
                                    </div>
                                    <div style="text-align: center; color: #667eea; font-weight: 700;">
                                        En cours... (${state.progress}/${state.total} mois)
                                    </div>
                                ` : completed ? `
                                    <div style="text-align: center; color: #4ade80; font-weight: 900; font-size: 1.2em;">
                                        ‚úÖ COMPL√âT√â
                                    </div>
                                ` : `
                                    <button class="btn btn-primary" onclick="startResearch('${key}')"
                                            ${!canResearch || !canAfford ? 'disabled' : ''}>
                                        ${!canResearch ? 'Recherches requises' : 'Lancer la recherche'}
                                    </button>
                                `}
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function renderMarketing() {
            return `
                <div class="section-title">üì£ Marketing & Communication</div>

                <div class="card">
                    <div class="card-title">üéØ √âtat Actuel</div>
                    <div class="grid-2">
                        <div class="stat-box">
                            <div class="stat-label">R√©putation</div>
                            <div class="stat-value">${gameState.reputation}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Parts de March√©</div>
                            <div class="stat-value">${gameState.marketShare.toFixed(1)}%</div>
                        </div>
                    </div>
                </div>

                <div class="section-title" style="font-size: 1.5em;">üì¢ Campagnes Marketing</div>
                <div class="grid">
                    <div class="card">
                        <div style="font-size: 3em; margin-bottom: 10px;">üì±</div>
                        <div class="card-title">R√©seaux Sociaux</div>
                        <div style="color: rgba(255,255,255,0.7); margin: 10px 0;">
                            Campagne sur les r√©seaux sociaux
                        </div>
                        <div style="margin: 15px 0;">
                            <div style="color: #4ade80;">+5 R√©putation</div>
                            <div style="color: #4ade80;">+0.5% Parts de march√©</div>
                        </div>
                        <button class="btn btn-primary" onclick="launchMarketingCampaign('social_media')">
                            Lancer ($10,000)
                        </button>
                    </div>

                    <div class="card">
                        <div style="font-size: 3em; margin-bottom: 10px;">üì∫</div>
                        <div class="card-title">Publicit√© TV</div>
                        <div style="color: rgba(255,255,255,0.7); margin: 10px 0;">
                            Spots TV aux heures de pointe
                        </div>
                        <div style="margin: 15px 0;">
                            <div style="color: #4ade80;">+15 R√©putation</div>
                            <div style="color: #4ade80;">+2% Parts de march√©</div>
                        </div>
                        <button class="btn btn-primary" onclick="launchMarketingCampaign('tv_ads')">
                            Lancer ($50,000)
                        </button>
                    </div>

                    <div class="card">
                        <div style="font-size: 3em; margin-bottom: 10px;">‚≠ê</div>
                        <div class="card-title">Influenceurs</div>
                        <div style="color: rgba(255,255,255,0.7); margin: 10px 0;">
                            Partenariats avec des influenceurs
                        </div>
                        <div style="margin: 15px 0;">
                            <div style="color: #4ade80;">+10 R√©putation</div>
                            <div style="color: #4ade80;">+1% Parts de march√©</div>
                        </div>
                        <button class="btn btn-primary" onclick="launchMarketingCampaign('influencer')">
                            Lancer ($25,000)
                        </button>
                    </div>

                    <div class="card">
                        <div style="font-size: 3em; margin-bottom: 10px;">üèôÔ∏è</div>
                        <div class="card-title">Affichage</div>
                        <div style="color: rgba(255,255,255,0.7); margin: 10px 0;">
                            Panneaux d'affichage dans les grandes villes
                        </div>
                        <div style="margin: 15px 0;">
                            <div style="color: #4ade80;">+8 R√©putation</div>
                            <div style="color: #4ade80;">+1.5% Parts de march√©</div>
                        </div>
                        <button class="btn btn-primary" onclick="launchMarketingCampaign('billboard')">
                            Lancer ($30,000)
                        </button>
                    </div>
                </div>
            `;
        }

        function renderExpansion() {
            return `
                <div class="section-title">üåç Expansion G√©ographique</div>

                <div class="card">
                    <div class="card-title">üìç Pr√©sence Actuelle</div>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                        ${gameState.cities.map(city => `
                            <div style="background: rgba(102,126,234,0.3); padding: 10px 20px; border-radius: 10px; border: 2px solid #667eea;">
                                ‚úÖ ${city}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="section-title" style="font-size: 1.5em;">üåÜ Nouvelles Villes</div>
                <div class="grid">
                    ${Object.entries(cityDefinitions).map(([city, def]) => {
                        const present = gameState.cities.includes(city);
                        const cost = gameState.research.global_expansion ? def.cost * 0.7 : def.cost;
                        const canAfford = gameState.capital >= cost;

                        if (present) return '';

                        return `
                            <div class="card">
                                <div style="font-size: 3em; margin-bottom: 10px;">üèôÔ∏è</div>
                                <div class="card-title">${city}</div>
                                <div class="grid-2" style="margin: 15px 0;">
                                    <div class="stat-box">
                                        <div class="stat-label">Taille du March√©</div>
                                        <div class="stat-value" style="font-size: 1.2em;">${(def.marketSize / 1000000).toFixed(0)}M</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">Concurrence</div>
                                        <div class="stat-value" style="font-size: 1.2em; color: ${def.competition > 0.8 ? '#f87171' : '#fbbf24'}">
                                            ${(def.competition * 100).toFixed(0)}%
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="expandToCity('${city}')" ${!canAfford ? 'disabled' : ''}>
                                    S'implanter (${formatMoney(cost)})
                                </button>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function renderMarket() {
            return `
                <div class="section-title">üìà Analyse du March√©</div>

                <div class="grid">
                    <div class="stat-box">
                        <div class="stat-label">Position sur le March√©</div>
                        <div class="stat-value">${gameState.marketShare.toFixed(1)}%</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">R√©putation</div>
                        <div class="stat-value">${gameState.reputation}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Villes Actives</div>
                        <div class="stat-value">${gameState.cities.length}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Employ√©s</div>
                        <div class="stat-value">${gameState.employees.length}</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">üìä Tendances du March√©</div>
                    <div style="color: rgba(255,255,255,0.7); line-height: 1.8;">
                        Votre entreprise poss√®de actuellement <strong style="color: #667eea;">${gameState.marketShare.toFixed(1)}%</strong>
                        du march√© global.<br><br>

                        Avec une r√©putation de <strong style="color: #4ade80;">${gameState.reputation}</strong>,
                        vous √™tes ${gameState.reputation > 80 ? 'extr√™mement' : gameState.reputation > 60 ? 'tr√®s' : gameState.reputation > 40 ? 'moyennement' : 'peu'}
                        reconnu par les consommateurs.<br><br>

                        Pr√©sent dans <strong style="color: #fbbf24;">${gameState.cities.length}</strong> villes avec
                        <strong style="color: #fbbf24;">${gameState.employees.length}</strong> employ√©s.
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">üéØ Recommandations Strat√©giques</div>
                    <div style="color: rgba(255,255,255,0.7); line-height: 1.8;">
                        ${gameState.marketShare < 5 ? '‚Ä¢ Focus sur les campagnes marketing pour gagner en visibilit√©<br>' : ''}
                        ${gameState.reputation < 50 ? '‚Ä¢ Investissez dans la qualit√© et le R&D pour am√©liorer votre r√©putation<br>' : ''}
                        ${gameState.employees.length < 5 ? '‚Ä¢ Recrutez plus d\'employ√©s pour augmenter votre capacit√©<br>' : ''}
                        ${gameState.cities.length < 3 ? '‚Ä¢ Consid√©rez l\'expansion g√©ographique<br>' : ''}
                        ${gameState.departments.rnd.level < 2 ? '‚Ä¢ Am√©liorez votre d√©partement R&D pour innover<br>' : ''}
                        ${gameState.capital < 50000 ? '‚Ä¢ Attention √† votre tr√©sorerie ! R√©duisez les d√©penses ou augmentez les revenus<br>' : ''}
                        ${gameState.marketShare > 20 ? '‚Ä¢ Excellente position ! Maintenez votre avance concurrentielle<br>' : ''}
                    </div>
                </div>
            `;
        }

        function renderStats() {
            return `
                <div class="section-title">üìâ Statistiques D√©taill√©es</div>

                <div class="grid">
                    <div class="stat-box">
                        <div class="stat-label">Mois Jou√©s</div>
                        <div class="stat-value">${gameState.stats.monthsPlayed}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Revenus Totaux</div>
                        <div class="stat-value" style="font-size: 1.3em;">${formatMoney(gameState.stats.totalRevenue)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">D√©penses Totales</div>
                        <div class="stat-value" style="color: #f87171; font-size: 1.3em;">${formatMoney(gameState.stats.totalExpenses)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Profit Net</div>
                        <div class="stat-value" style="color: ${gameState.stats.totalRevenue - gameState.stats.totalExpenses >= 0 ? '#4ade80' : '#f87171'}; font-size: 1.3em;">
                            ${formatMoney(gameState.stats.totalRevenue - gameState.stats.totalExpenses)}
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Employ√©s Embauch√©s</div>
                        <div class="stat-value">${gameState.stats.employeesHired}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Recherches Compl√©t√©es</div>
                        <div class="stat-value">${gameState.stats.researchCompleted}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Villes Conquises</div>
                        <div class="stat-value">${gameState.stats.citiesExpanded}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Capital Actuel</div>
                        <div class="stat-value" style="font-size: 1.3em;">${formatMoney(gameState.capital)}</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">üèÜ Performance Globale</div>
                    <div style="font-size: 1.2em; text-align: center; margin: 20px 0;">
                        ${gameState.capital > 10000000 ? 'üåü Magnat L√©gendaire' :
                          gameState.capital > 5000000 ? 'üëë Empire Florissant' :
                          gameState.capital > 1000000 ? 'üíé Millionnaire' :
                          gameState.capital > 500000 ? '‚≠ê Entrepreneur √† Succ√®s' :
                          gameState.capital > 100000 ? 'üìà En Croissance' :
                          'üå± Startup'}
                    </div>
                </div>
            `;
        }

        function updateNewsFeed() {
            const feed = document.getElementById('newsFeed');
            if (gameState.news.length === 0) {
                feed.innerHTML = '<div style="color: rgba(255,255,255,0.5); text-align: center;">Aucune actualit√©</div>';
            } else {
                feed.innerHTML = gameState.news.slice(0, 8).map(news => `
                    <div style="padding: 12px; background: rgba(0,0,0,0.3); border-radius: 8px; margin-bottom: 10px; border-left: 3px solid #667eea;">
                        <div style="font-size: 0.9em; margin-bottom: 5px;">${news.text}</div>
                        <div style="font-size: 0.75em; color: rgba(255,255,255,0.5);">${news.time}</div>
                    </div>
                `).join('');
            }
        }

        function updateObjectives() {
            const objectives = document.getElementById('objectives');
            const goals = [];

            if (gameState.capital < 1000000) goals.push({ text: 'Atteindre $1M', icon: 'üí∞' });
            if (gameState.employees.length < 10) goals.push({ text: 'Embaucher 10 employ√©s', icon: 'üë•' });
            if (gameState.cities.length < 5) goals.push({ text: 'S\'implanter dans 5 villes', icon: 'üåç' });
            if (gameState.marketShare < 10) goals.push({ text: 'Obtenir 10% de parts de march√©', icon: 'üìä' });
            if (Object.values(gameState.departments).some(d => d.level < 5)) goals.push({ text: 'Am√©liorer tous les d√©partements', icon: 'üè¢' });

            if (goals.length === 0) {
                objectives.innerHTML = '<div style="color: rgba(255,255,255,0.5); text-align: center;">Tous les objectifs atteints !<br>üéâ</div>';
            } else {
                objectives.innerHTML = goals.map(goal => `
                    <div style="padding: 10px; background: rgba(102,126,234,0.1); border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #667eea;">
                        ${goal.icon} ${goal.text}
                    </div>
                `).join('');
            }
        }

        function showNotification(text, type = 'info') {
            const container = document.getElementById('notifications');
            const notif = document.createElement('div');
            notif.className = 'notification';
            notif.textContent = text;

            if (type === 'error') {
                notif.style.background = 'linear-gradient(135deg, #f87171, #ef4444)';
            } else if (type === 'success') {
                notif.style.background = 'linear-gradient(135deg, #4ade80, #22c55e)';
            }

            container.appendChild(notif);

            setTimeout(() => {
                notif.style.animation = 'slideInRight 0.5s reverse';
                setTimeout(() => notif.remove(), 500);
            }, 4000);
        }

        // ==================== SAVE/LOAD ====================
        function saveGame() {
            localStorage.setItem('megacorpTycoon', JSON.stringify(gameState));
        }

        function loadGame() {
            const save = localStorage.getItem('megacorpTycoon');
            if (save) {
                try {
                    Object.assign(gameState, JSON.parse(save));
                    updateIncomeExpenses();
                } catch (e) {
                    console.error('Failed to load:', e);
                }
            }
        }

        function resetGame() {
            if (confirm('R√©initialiser toute progression ?')) {
                localStorage.removeItem('megacorpTycoon');
                location.reload();
            }
        }

        // ==================== INIT ====================
        loadGame();
        updateIncomeExpenses();
        updateUI();

        // Auto-save every 10 seconds
        setInterval(saveGame, 10000);

        console.log('%cüè¢ MegaCorp Tycoon loaded!', 'color: #667eea; font-size: 20px; font-weight: bold;');
        console.log('%cType resetGame() to reset', 'color: #f87171;');
    </script>
</body>
</html>
